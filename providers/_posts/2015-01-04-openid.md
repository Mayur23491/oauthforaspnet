---
layout: provider
title:  OpenID
logo: openid.png
links:
  - name: OpenID Home Page
    url: http://openid.net/
guide: /providers/openid/guides/aspnet-mvc5
---
## Introduction

[OpenID](http://openid.net/) is an authentication protocol implemented by many organizations. In the following examples we will use Orange as the OpenID authentication provider but you can use any other OpenID authentication provider.

## 1. Install the Nuget Package

Install the Nuget Package which contains the OpenID OAuth provider.

{% highlight bash %}
Install-Package Install-Package Owin.Security.Providers
{% endhighlight %}

## 2. Register Provider

Locate the file in your project called `\App_Start\Startup.Auth.cs`. Ensure that you have imported the `Owin.Security.Providers.OpenID` namespace:

{% highlight csharp %}
using Owin.Security.Providers.OpenID;
{% endhighlight %}

In the `ConfigureAuth` method add the following lines of code:

{% highlight csharp %}
app.UseOpenIDAuthentication("http://orange.fr", "Orange");
{% endhighlight %}

The first parameter is the url of the OpenID authentication provider, usually the home page. The second is the name displayed on the “Login” page of the application.

If the OpenID authentication provider have issues in the discovery part of the protocol you can directly specify the OpenID login url instead of the discovery one:

{% highlight csharp %}
app.UseOpenIDAuthentication("http://openid.orange.fr/server", "Orange", true);
{% endhighlight %}

## 4. Advanced Configuration

### Specify an alternative callback path

By default the OpenID provider will request the OpenID provider to redirect to the path `/signin-openid[providername]` after the user has signed in and granted permissions on the OpenID provider. You can specify an alternative redirect URL:

{% highlight csharp %}
var options = new OpenIDAuthenticationOptions
{
    ProviderDiscoveryUri = "http://orange.fr",
    Caption = "Orange",
    AuthenticationType = "Orange",
    CallbackPath = new PathString("/oauth-redirect/orange")
};
app.UseOpenIDAuthentication(options);
{% endhighlight %}

### Retrieve user information returned from the OpenID provider

You can retrieve the user information returned from the OpenID provider in the `OnAuthenticated` callback function which gets invoked after the user has authenticated:

{% highlight csharp %}
var options = new OpenIDAuthenticationOptions
{
    ProviderDiscoveryUri = "http://orange.fr",
    Caption = "Orange",
    AuthenticationType = "Orange",
    Provider = new OpenIDAuthenticationProvider
    {
        OnAuthenticated = async context =>
        {
            // Retrieve the user's information from the OpenID provider
            var attributeExchangeProperties = context.AttributeExchangeProperties;

            // Retrieve the user's identity with info like username
            var identity = context.Identity;
        }
    }
};
app.UseOpenIDAuthentication(options);
{% endhighlight %}
